/*!
 * meny 1.4
 * http://lab.hakim.se/meny
 * MIT licensed
 *
 * Created by Hakim El Hattab (http://hakim.se, @hakimel)
 */(function(b,a){typeof define=='function'&&define.amd?define(a):b.Meny=a()})(this,function(){typeof Date.now!='function'&&(Date.now=function(){return(new Date).getTime()});var a={create:function(b){return function(){var v,p,k,j,z,c,d,G,F,l,m,n,o,e,E,x,s,H,u,C,w,D,y,i,A,h,B,r,t,q;if(!b||!b.menuElement||!b.contentsElement)throw'You need to specify which menu and contents elements to use.';if(b.menuElement.parentNode!==b.contentsElement.parentNode)throw'The menu and contents elements must have the same parent.';v='top',p='right',k='bottom',j='left',z='WebkitPerspective'in document.body.style||'MozPerspective'in document.body.style||'msPerspective'in document.body.style||'OPerspective'in document.body.style||'perspective'in document.body.style,c={width:300,height:300,position:j,threshold:40,angle:30,overlap:0,transitionDuration:'0.5s',transitionEasing:'ease',gradient:'rgba(0,0,0,0.20) 0%, rgba(0,0,0,0.65) 100%)',mouse:!0,touch:!0},d={menu:b.menuElement,contents:b.contentsElement,wrapper:b.menuElement.parentNode,cover:null},G=d.wrapper.offsetLeft,F=d.wrapper.offsetTop,l=null,m=null,n=null,o=null,e=!1,E=!1,h={},B=[],N(b);function N(b){a.extend(c,b),V(),U(),T(),S(),R(),Q()}function V(){switch(H='',D='',menuAngle=c.angle,contentsAngle=c.angle/-2,c.position){case v:x='50% 0%',s='rotateX( '+menuAngle+'deg ) translateY( -100% ) translateY( '+c.overlap+'px )',w='50% 0',y='translateY( '+c.height+'px ) rotateX( '+contentsAngle+'deg )',u={top:'-'+(c.height-c.overlap)+'px'},C={top:'0px'},i={top:'0px'},A={top:c.height+'px'};break;case p:x='100% 50%',s='rotateY( '+menuAngle+'deg ) translateX( 100% ) translateX( -2px ) scale( 1.01 )',w='100% 50%',y='translateX( -'+c.width+'px ) rotateY( '+contentsAngle+'deg )',u={right:'-'+(c.width-c.overlap)+'px'},C={right:'0px'},i={left:'0px'},A={left:'-'+c.width+'px'};break;case k:x='50% 100%',s='rotateX( '+-menuAngle+'deg ) translateY( 100% ) translateY( -'+c.overlap+'px )',w='50% 100%',y='translateY( -'+c.height+'px ) rotateX( '+-contentsAngle+'deg )',u={bottom:'-'+(c.height-c.overlap)+'px'},C={bottom:'0px'},i={top:'0px'},A={top:'-'+c.height+'px'};break;default:x='100% 50%',s='translateX( -100% ) translateX( '+c.overlap+'px ) scale( 1.01 ) rotateY( '+-menuAngle+'deg )',w='0 50%',y='translateX( '+c.width+'px ) rotateY( '+-contentsAngle+'deg )',u={left:'-'+(c.width-c.overlap)+'px'},C={left:'0px'},i={left:'0px'},A={left:c.width+'px'};break}}function U(){a.addClass(d.wrapper,'meny-'+c.position),h.wrapper=d.wrapper.style.cssText,d.wrapper.style[a.prefix('perspective')]='800px',d.wrapper.style[a.prefix('perspectiveOrigin')]=w}function T(){d.cover&&d.cover.parentNode.removeChild(d.cover),d.cover=document.createElement('div'),d.cover.style.position='absolute',d.cover.style.display='block',d.cover.style.width='100%',d.cover.style.height='100%',d.cover.style.left=0,d.cover.style.top=0,d.cover.style.zIndex=1e3,d.cover.style.visibility='hidden',d.cover.style.opacity=0,d.cover.style.color='#5d78ff',d.cover.style.border='1rem ridge #5d78ff';try{d.cover.style.background='rgba( 0, 0, 0, 0.4 )',d.cover.style.background='-ms-linear-gradient('+c.position+','+c.gradient,d.cover.style.background='-moz-linear-gradient('+c.position+','+c.gradient,d.cover.style.background='-webkit-linear-gradient('+c.position+','+c.gradient}catch(a){}z&&(d.cover.style[a.prefix('transition')]='all '+c.transitionDuration+' '+c.transitionEasing),d.contents.appendChild(d.cover)}function S(){var b=d.menu.style;switch(c.position){case v:b.width='100%',b.height=c.height+'px';break;case p:b.right='0',b.width=c.width+'px',b.height='100%';break;case k:b.bottom='0',b.width='100%',b.height=c.height+'px';break;case j:b.width=c.width+'px',b.height='100%';break}h.menu=b.cssText,b.position='fixed',b.display='block',b.zIndex=1,z?(b[a.prefix('transform')]=s,b[a.prefix('transformOrigin')]=x,b[a.prefix('transition')]='all '+c.transitionDuration+' '+c.transitionEasing):a.extend(b,u)}function R(){var b=d.contents.style;h.contents=b.cssText,z?(b[a.prefix('transform')]=D,b[a.prefix('transformOrigin')]=w,b[a.prefix('transition')]='all '+c.transitionDuration+' '+c.transitionEasing):(b.position=b.position.match(/relative|absolute|fixed/gi)?b.position:'relative',a.extend(b,i))}function Q(){'ontouchstart'in window&&(c.touch?(a.bindEvent(document,'touchstart',J),a.bindEvent(document,'touchend',M)):(a.unbindEvent(document,'touchstart',J),a.unbindEvent(document,'touchend',M))),c.mouse?(a.bindEvent(document,'mousedown',I),a.bindEvent(document,'mouseup',K),a.bindEvent(document,'mousemove',L)):(a.unbindEvent(document,'mousedown',I),a.unbindEvent(document,'mouseup',K),a.unbindEvent(document,'mousemove',L))}function g(){e||(e=!0,a.addClass(d.wrapper,'meny-active'),d.cover.style.height=d.contents.scrollHeight+'px',d.cover.style.visibility='visible',z?(a.bindEventOnce(d.wrapper,'transitionend',function(){a.dispatchEvent(d.menu,'opened')}),d.cover.style.opacity=1,d.contents.style[a.prefix('transform')]=y,d.menu.style[a.prefix('transform')]=H):(r&&r.stop(),r=a.animate(d.menu,C,500),t&&t.stop(),t=a.animate(d.contents,A,500),q&&q.stop(),q=a.animate(d.cover,{opacity:1},500)),a.dispatchEvent(d.menu,'open'))}function f(){e&&(e=!1,a.removeClass(d.wrapper,'meny-active'),z?(a.bindEventOnce(d.wrapper,'transitionend',function(){a.dispatchEvent(d.menu,'closed')}),d.cover.style.visibility='hidden',d.cover.style.opacity=0,d.contents.style[a.prefix('transform')]=D,d.menu.style[a.prefix('transform')]=s):(r&&r.stop(),r=a.animate(d.menu,u,500),t&&t.stop(),t=a.animate(d.contents,i,500),q&&q.stop(),q=a.animate(d.cover,{opacity:0},500,function(){d.cover.style.visibility='hidden',a.dispatchEvent(d.menu,'closed')})),a.dispatchEvent(d.menu,'close'))}function _(){d.wrapper.style.cssText=h.wrapper,d.menu.style.cssText=h.menu,d.contents.style.cssText=h.contents,d.cover&&d.cover.parentNode&&d.cover.parentNode.removeChild(d.cover),a.unbindEvent(document,'touchstart',J),a.unbindEvent(document,'touchend',M),a.unbindEvent(document,'mousedown',I),a.unbindEvent(document,'mouseup',K),a.unbindEvent(document,'mousemove',L);for(var b in B)this.removeEventListener(B[b][0],B[b][1]);B=[]}function I(a){E=!0}function L(i){var a,b,e,h,l;if(!E)switch(a=i.clientX-G,b=i.clientY-F,c.position){case v:b>c.height?f():b<c.threshold&&g();break;case p:e=d.wrapper.offsetWidth,a<e-c.width?f():a>e-c.threshold&&g();break;case k:h=d.wrapper.offsetHeight,b<h-c.height?f():b>h-c.threshold&&g();break;case j:l=document.getElementById('content'),a-100>c.width&&l.addEventListener('click',function(){f(),document.getElementById('hideNavBar').style.display="block"},!1)?(f(),document.getElementById('hideNavBar').style.display="block"):a<c.threshold&&(g(),document.getElementById('hideNavBar').style.display="none");break}}function K(a){E=!1}function J(b){l=b.touches[0].clientX-G,m=b.touches[0].clientY-F,n=null,o=null,a.bindEvent(document,'touchmove',O)}function O(b){n=b.touches[0].clientX-G,o=b.touches[0].clientY-F;var a=null;Math.abs(n-l)>Math.abs(o-m)?n<l-c.threshold?a=Y:n>l+c.threshold&&(a=X):o<m-c.threshold?a=P:o>m+c.threshold&&(a=Z),a&&a()&&b.preventDefault()}function M(b){a.unbindEvent(document,'touchmove',O),n===null&&o===null&&W()}function W(){var a=c.position===v&&m>c.height||c.position===p&&l<d.wrapper.offsetWidth-c.width||c.position===k&&m<d.wrapper.offsetHeight-c.height||c.position===j&&l>c.width;a&&f()}function X(){if(c.position===p&&e)return f(),!0;if(c.position===j&&!e)return g(),!0}function Y(){if(c.position===p&&!e)return g(),!0;if(c.position===j&&e)return f(),!0}function Z(){if(c.position===k&&e)return f(),!0;if(c.position===v&&!e)return g(),!0}function P(){if(c.position===k&&!e)return g(),!0;if(c.position===v&&e)return f(),!0}return{configure:N,open:g,close:f,destroy:_,isOpen:function(){return e},addEventListener:function(b,c){B.push([b,c]),d.menu&&a.bindEvent(d.menu,b,c)},removeEventListener:function(b,c){d.menu&&a.unbindEvent(d.menu,b,c)}}}()},animate:function(b,a,d,c){return function(){var f={},e,j,g;for(e in a)f[e]={start:parseFloat(b.style[e])||0,end:parseFloat(a[e]),unit:typeof a[e]=='string'&&a[e].match(/px|em|%/gi)?a[e].match(/px|em|%/gi)[0]:''};j=Date.now();function h(){var e=1-Math.pow(1-(Date.now()-j)/d,5),k,a;for(k in f)a=f[k],b.style[k]=a.start+(a.end-a.start)*e+a.unit;e<1?g=setTimeout(h,1e3/60):(c&&c(),i())}function i(){clearTimeout(g)}return h(),{stop:i}}()},extend:function(c,a){for(var b in a)c[b]=a[b]},prefix:function(a,f){for(var c=a.slice(0,1).toUpperCase()+a.slice(1),d=['Webkit','Moz','O','ms'],b=0,g=d.length,e;b<g;b++)if(e=d[b],typeof(f||document.body).style[e+c]!='undefined')return e+c;return a},addClass:function(a,b){a.className=a.className.replace(/\s+$/gi,'')+' '+b},removeClass:function(a,b){a.className=a.className.replace(b,'')},bindEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent('on'+b,c)},unbindEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent('on'+b,c)},bindEventOnce:function(a,b,d){var e=this,c=function(){e.unbindEvent(a,b,c),d.apply(this,arguments)};this.bindEvent(a,b,c)},dispatchEvent:function(c,d,e){if(c){var b=document.createEvent("HTMLEvents",1,2);b.initEvent(d,!0,!0),a.extend(b,e),c.dispatchEvent(b)}},getQuery:function(){var a={};return location.search.replace(/[A-Z0-9]+?=([\w|:|\/\.]*)/gi,function(b){a[b.split('=').shift()]=b.split('=').pop()}),a}};return a})