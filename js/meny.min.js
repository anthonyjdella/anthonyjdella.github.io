/*!
 * meny 1.4
 * http://lab.hakim.se/meny
 * MIT licensed
 *
 * Created by Hakim El Hattab (http://hakim.se, @hakimel)
 */(function(e,t){typeof define=="function"&&define.amd?define(t):e.Meny=t()})(this,function(){typeof Date.now!="function"&&(Date.now=function(){return(new Date).getTime()});var e={create:function(t){return function(){if(!t||!t.menuElement||!t.contentsElement)throw"You need to specify which menu and contents elements to use.";if(t.menuElement.parentNode!==t.contentsElement.parentNode)throw"The menu and contents elements must have the same parent.";var c,g,v,b,j,y,w,O,x,E,A,S,P,_="top",p="right",d="bottom",l="left",C="WebkitPerspective"in document.body.style||"MozPerspective"in document.body.style||"msPerspective"in document.body.style||"OPerspective"in document.body.style||"perspective"in document.body.style,n={width:300,height:300,position:l,threshold:40,angle:30,overlap:0,transitionDuration:"0.5s",transitionEasing:"ease",gradient:"rgba(0,0,0,0.20) 0%, rgba(0,0,0,0.65) 100%)",mouse:!0,touch:!0},s={menu:t.menuElement,contents:t.contentsElement,wrapper:t.menuElement.parentNode,cover:null},D=s.wrapper.offsetLeft,R=s.wrapper.offsetTop,u=null,h=null,m=null,f=null,o=!1,F=!1,r={},k=[];H(t);function H(t){e.extend(n,t),q(),K(),U(),W(),$(),V()}function q(){switch(P="",S="",menuAngle=n.angle,contentsAngle=n.angle/-2,n.position){case _:O="50% 0%",b="rotateX( "+menuAngle+"deg ) translateY( -100% ) translateY( "+n.overlap+"px )",w="50% 0",x="translateY( "+n.height+"px ) rotateX( "+contentsAngle+"deg )",y={top:"-"+(n.height-n.overlap)+"px"},A={top:"0px"},c={top:"0px"},E={top:n.height+"px"};break;case p:O="100% 50%",b="rotateY( "+menuAngle+"deg ) translateX( 100% ) translateX( -2px ) scale( 1.01 )",w="100% 50%",x="translateX( -"+n.width+"px ) rotateY( "+contentsAngle+"deg )",y={right:"-"+(n.width-n.overlap)+"px"},A={right:"0px"},c={left:"0px"},E={left:"-"+n.width+"px"};break;case d:O="50% 100%",b="rotateX( "+-menuAngle+"deg ) translateY( 100% ) translateY( -"+n.overlap+"px )",w="50% 100%",x="translateY( -"+n.height+"px ) rotateX( "+-contentsAngle+"deg )",y={bottom:"-"+(n.height-n.overlap)+"px"},A={bottom:"0px"},c={top:"0px"},E={top:"-"+n.height+"px"};break;default:O="100% 50%",b="translateX( -100% ) translateX( "+n.overlap+"px ) scale( 1.01 ) rotateY( "+-menuAngle+"deg )",w="0 50%",x="translateX( "+n.width+"px ) rotateY( "+-contentsAngle+"deg )",y={left:"-"+(n.width-n.overlap)+"px"},A={left:"0px"},c={left:"0px"},E={left:n.width+"px"};break}}function K(){e.addClass(s.wrapper,"meny-"+n.position),r.wrapper=s.wrapper.style.cssText,s.wrapper.style[e.prefix("perspective")]="800px",s.wrapper.style[e.prefix("perspectiveOrigin")]=w}function U(){s.cover&&s.cover.parentNode.removeChild(s.cover),s.cover=document.createElement("div"),s.cover.style.position="absolute",s.cover.style.display="block",s.cover.style.width="100%",s.cover.style.height="100%",s.cover.style.left=0,s.cover.style.top=0,s.cover.style.zIndex=1e3,s.cover.style.visibility="hidden",s.cover.style.opacity=0,s.cover.style.color="#5d78ff",s.cover.style.border=".5rem ridge #5d78ff";try{s.cover.style.background="rgba( 0, 0, 0, 0.4 )",s.cover.style.background="-ms-linear-gradient("+n.position+","+n.gradient,s.cover.style.background="-moz-linear-gradient("+n.position+","+n.gradient,s.cover.style.background="-webkit-linear-gradient("+n.position+","+n.gradient}catch{}C&&(s.cover.style[e.prefix("transition")]="all "+n.transitionDuration+" "+n.transitionEasing),s.contents.appendChild(s.cover)}function W(){var t=s.menu.style;switch(n.position){case _:t.width="100%",t.height=n.height+"px";break;case p:t.right="0",t.width=n.width+"px",t.height="100%";break;case d:t.bottom="0",t.width="100%",t.height=n.height+"px";break;case l:t.width=n.width+"px",t.height="100%";break}r.menu=t.cssText,t.position="fixed",t.display="block",t.zIndex=1,C?(t[e.prefix("transform")]=b,t[e.prefix("transformOrigin")]=O,t[e.prefix("transition")]="all "+n.transitionDuration+" "+n.transitionEasing):e.extend(t,y)}function $(){var t=s.contents.style;r.contents=t.cssText,C?(t[e.prefix("transform")]=S,t[e.prefix("transformOrigin")]=w,t[e.prefix("transition")]="all "+n.transitionDuration+" "+n.transitionEasing):(t.position=t.position.match(/relative|absolute|fixed/gi)?t.position:"relative",e.extend(t,c))}function V(){"ontouchstart"in window&&(n.touch?(e.bindEvent(document,"touchstart",N),e.bindEvent(document,"touchend",z)):(e.unbindEvent(document,"touchstart",N),e.unbindEvent(document,"touchend",z))),n.mouse?(e.bindEvent(document,"mousedown",T),e.bindEvent(document,"mouseup",M),e.bindEvent(document,"mousemove",L)):(e.unbindEvent(document,"mousedown",T),e.unbindEvent(document,"mouseup",M),e.unbindEvent(document,"mousemove",L))}function a(){o||(o=!0,e.addClass(s.wrapper,"meny-active"),s.cover.style.height=s.contents.scrollHeight+"px",s.cover.style.visibility="visible",C?(e.bindEventOnce(s.wrapper,"transitionend",function(){e.dispatchEvent(s.menu,"opened")}),s.cover.style.opacity=1,s.contents.style[e.prefix("transform")]=x,s.menu.style[e.prefix("transform")]=P):(v&&v.stop(),v=e.animate(s.menu,A,500),j&&j.stop(),j=e.animate(s.contents,E,500),g&&g.stop(),g=e.animate(s.cover,{opacity:1},500)),e.dispatchEvent(s.menu,"open"))}function i(){o&&(o=!1,C?(e.bindEventOnce(s.wrapper,"transitionend",function(){e.dispatchEvent(s.menu,"closed")}),s.cover.style.visibility="hidden",s.cover.style.opacity=0,s.contents.style[e.prefix("transform")]=S,s.menu.style[e.prefix("transform")]=b):(v&&v.stop(),v=e.animate(s.menu,y,500),j&&j.stop(),j=e.animate(s.contents,c,500),g&&g.stop(),g=e.animate(s.cover,{opacity:0},500,function(){s.cover.style.visibility="hidden",e.dispatchEvent(s.menu,"closed")})),e.dispatchEvent(s.menu,"close"))}function Z(){s.wrapper.style.cssText=r.wrapper,s.menu.style.cssText=r.menu,s.contents.style.cssText=r.contents,s.cover&&s.cover.parentNode&&s.cover.parentNode.removeChild(s.cover),e.unbindEvent(document,"touchstart",N),e.unbindEvent(document,"touchend",z),e.unbindEvent(document,"mousedown",T),e.unbindEvent(document,"mouseup",M),e.unbindEvent(document,"mousemove",L);for(var t in k)this.removeEventListener(k[t][0],k[t][1]);k=[]}function T(){F=!0}function L(e){if(!F){var r,c,u,t=e.clientX-D,o=e.clientY-R;switch(n.position){case _:o>n.height?i():o<n.threshold&&a();break;case p:r=s.wrapper.offsetWidth,t<r-n.width?i():t>r-n.threshold&&a();break;case d:c=s.wrapper.offsetHeight,o<c-n.height?i():o>c-n.threshold&&a();break;case l:u=document.getElementById("content"),t-100>n.width&&u.addEventListener("click",function(){i(),document.getElementById("hideNavBar").style.transition="opacity .8s ease-in",document.getElementById("hideNavBar").style.opacity="1",document.getElementById("hideNavBar").style.height="auto",document.getElementById("hideNavBar").style.pointerEvents="auto"},!1)?(i(),document.getElementById("hideNavBar").style.transition="opacity .8s ease-in",document.getElementById("hideNavBar").style.opacity="1",document.getElementById("hideNavBar").style.height="auto",document.getElementById("hideNavBar").style.pointerEvents="auto"):t<n.threshold&&(a(),document.getElementById("hideNavBar").style.transition="opacity .1s ease-out",document.getElementById("hideNavBar").style.opacity="0",document.getElementById("hideNavBar").style.height="0",document.getElementById("hideNavBar").style.overflow="hidden",document.getElementById("hideNavBar").style.pointerEvents="none");break}}}function M(){F=!1}function N(t){u=t.touches[0].clientX-D,h=t.touches[0].clientY-R,m=null,f=null,e.bindEvent(document,"touchmove",I)}function I(e){m=e.touches[0].clientX-D,f=e.touches[0].clientY-R;var t=null;Math.abs(m-u)>Math.abs(f-h)?m<u-n.threshold?t=X:m>u+n.threshold&&(t=G):f<h-n.threshold?t=B:f>h+n.threshold&&(t=Q),t&&t()&&e.preventDefault()}function z(){e.unbindEvent(document,"touchmove",I),m===null&&f===null&&Y()}function Y(){var e=n.position===_&&h>n.height||n.position===p&&u<s.wrapper.offsetWidth-n.width||n.position===d&&h<s.wrapper.offsetHeight-n.height||n.position===l&&u>n.width;e&&(i(),document.getElementById("hideNavBar").style.transition="opacity .8s ease-in",document.getElementById("hideNavBar").style.opacity="1",document.getElementById("hideNavBar").style.height="auto",document.getElementById("hideNavBar").style.pointerEvents="auto")}function G(){if(n.position===p&&o)return i(),!0;if(n.position===l&&!o)return a(),document.getElementById("hideNavBar").style.transition="opacity .1s ease-out",document.getElementById("hideNavBar").style.opacity="0",document.getElementById("hideNavBar").style.height="0",document.getElementById("hideNavBar").style.overflow="hidden",document.getElementById("hideNavBar").style.pointerEvents="none",!0}function X(){if(n.position===p&&!o)return a(),!0;if(n.position===l&&o)return i(),document.getElementById("hideNavBar").style.transition="opacity .8s ease-in",document.getElementById("hideNavBar").style.opacity="1",document.getElementById("hideNavBar").style.height="auto",document.getElementById("hideNavBar").style.pointerEvents="auto",!0}function Q(){if(n.position===d&&o)return i(),!0;if(n.position===_&&!o)return a(),!0}function B(){if(n.position===d&&!o)return a(),!0;if(n.position===_&&o)return i(),!0}return{configure:H,open:a,close:i,destroy:Z,isOpen:function(){return o},addEventListener:function(t,n){k.push([t,n]),s.menu&&e.bindEvent(s.menu,t,n)},removeEventListener:function(t,n){s.menu&&e.unbindEvent(s.menu,t,n)}}}()},animate:function(e,t,n,s){return function(){var o,a,r,i={};for(o in t)i[o]={start:parseFloat(e.style[o])||0,end:parseFloat(t[o]),unit:typeof t[o]=="string"&&t[o].match(/px|em|%/gi)?t[o].match(/px|em|%/gi)[0]:""};a=Date.now();function c(){var t,d,o=1-Math.pow(1-(Date.now()-a)/n,5);for(d in i)t=i[d],e.style[d]=t.start+(t.end-t.start)*o+t.unit;o<1?r=setTimeout(c,1e3/60):(s&&s(),l())}function l(){clearTimeout(r)}return c(),{stop:l}}()},extend:function(e,t){for(var n in t)e[n]=t[n]},prefix:function(e,t){for(var s,o=e.slice(0,1).toUpperCase()+e.slice(1),i=["Webkit","Moz","O","ms"],n=0,a=i.length;n<a;n++)if(s=i[n],typeof(t||document.body).style[s+o]!="undefined")return s+o;return e},addClass:function(e,t){e.className=e.className.replace(/\s+$/gi,"")+" "+t},removeClass:function(e,t){e.className=e.className.replace(t,"")},bindEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unbindEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},bindEventOnce:function(e,t,n){var o=this,s=function(){o.unbindEvent(e,t,s),n.apply(this,arguments)};this.bindEvent(e,t,s)},dispatchEvent:function(t,n,s){if(t){var o=document.createEvent("HTMLEvents",1,2);o.initEvent(n,!0,!0),e.extend(o,s),t.dispatchEvent(o)}},getQuery:function(){var e={};return location.search.replace(/[A-Z0-9]+?=([\w|:|/.]*)/gi,function(t){e[t.split("=").shift()]=t.split("=").pop()}),e}};return e})